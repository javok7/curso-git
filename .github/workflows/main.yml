name: 🧾 Validate Pull Request Title

on:
  pull_request:
    types: [opened, edited, reopened, synchronize]

jobs:
  validate-pr-title:
    runs-on: ubuntu-latest
    steps:
      - name: 🔎 Validate PR title format
        run: |
          title="${{ github.event.pull_request.title }}"
          echo "🔍 PR Title: $title"

          # Expresión regular para validar las categorías permitidas
          regex="^(Feature|Patch|Refactor|Docs|Delete|Chore|Test):"

          if [[ ! "$title" =~ $regex ]]; then
            echo "🚫 Invalid PR title format."
            echo "PR title must start with one of the following prefixes:"
            echo "Feature:, Patch:, Refactor:, Docs:, Delete:, Chore:, or Test:"
            echo ""
            echo "Example: Feature: add autoscaling module"
            exit 1
          else
            echo "✅ PR title format is valid."
          fi
